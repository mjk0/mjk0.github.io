<!DOCTYPE html>
<html>
<head>
    <title>Mahjong Play</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="/css/materialize.css" media="screen,projection"/>
    <link type="text/css" rel="stylesheet" href="/css/animate.min.css">
    <link type="text/css" rel="stylesheet" href="css/play.css">
    <link rel="modulepreload" href="js/pst.js">
    <link rel="modulepreload" href="js/pmj.js">
    <link rel="modulepreload" href="js/ws.js">
    <link rel="modulepreload" href="js/punpl.js">
    <link rel="modulepreload" href="js/pui.js">
    <style>
        html, body {
            height: 90vh;
            min-height: 90vh;
        }
    </style>
</head>
<body>
    <!-- Dropdown Structure -->
    <ul id="dropdown_h" class="dropdown-content">
        <li><a href="rules.html" target="_blank">Rules</a></li>
        <li><a href="help.html" target="_blank">Game Help</a></li>
    </ul>
    <ul id="dropdown_g" class="dropdown-content">
        <li><a onclick="PUI.setPlayView('tileplay')">Play Sel</a></li>
        <li><a onclick="PUI.setPlayView('waiton')">Wait4</a></li>
    </ul>
    <nav><div class="nav-wrapper">
            <a class="brand-logo left">Mahjong Beta<i id="ws-status"
                    class="material-icons right">sync_problem</i></a>
            <a data-target="sidenav-r"
                class="sidenav-trigger right hide-on-med-and-up"><i
                class="material-icons">menu</i></a>
            <ul class="right">
                <li><a onclick="PUI.chatShow(-1)"><i id="chat-icon"
                    class="material-icons">chat</i></a></li>
                <li><a href="./">Stand</a></li>
                <li><a class="dropdown-trigger hide-on-small-only"
                     data-target="dropdown_h">Help<i
                    class="material-icons right helpdd">arrow_drop_down</i></a></li>
                <li><a class="dropdown-trigger hide-on-small-only"
                    data-target="dropdown_g"><i
                    class="material-icons">more_vert</i></a></li>
            </ul>
        </div>
    </nav>
    <ul id="sidenav-r" class="sidenav sidenav-close">
        <li><a href="rules.html" target="_blank">Rules</a></li>
        <li><a href="help.html" target="_blank">Game Help</a></li>
        <li class="divider"></li>
        <li><a onclick="alert('trick 1')">Trick 1</a></li>
        <li><a onclick="alert('trick 2')">Trick 2</a></li>
    </ul>

    <div class="flex-container greenStripes">
        <div class="box box-2 row w100p">
            <!-- Left column -->
            <div class="col s4">
                <div class="flex-container">
                    <div class="box box-2"><div class="div-wind">
                        <table class="curr-wind">
                            <tr><th>Wind:</th><th id="tilewind"></th></tr>
                            <tr><td colspan="2"><button
                                class="btn-score">Score History</button>
                            </td></tr>
                        </table></div>
                        <div class="thinking1">
                            <div class="fluffy-cloud3"><span
                                class="think-q">?</span>
                            </div>
                            <img src="media/thinking_anim.gif"/>
                        </div>
                    </div>
                    <div class="box box-svg-m">
                        <table id="lhand" class="table-svg-m"><tr>
                            <td id="tilesp1">flower</td>
                        </tr>
                        <tr><td class="namebar nb-inactive"><span id="seatdir1"
                            class="seatdir"></span><span id="seatname1"
                            class="seatname">Lefty</span>
                            <img class="svg-icon" src="media/Dice-2r1-Icon.svg"/>
                            </td></tr>
                        </table>
                    </div>
                </div>
            </div>
            <!-- Middle column -->
            <div class="col s4">
                <div class="flex-container">
                    <div class="box box-svg-m wide-middle tile-anchor">
                        <table id="ohand" class="table-svg-m"><tr>
                            <td id="tilesp2">flower</td>
                        </tr>
                        <tr><td class="namebar nb-inactive"><span id="seatdir2"
                            class="seatdir"></span><span id="seatname2"
                            class="seatname">Oppo</span>
                            <img class="svg-icon" src="media/Dice-2r1-Icon.svg"/>
                        </td></tr>
                        </table>
                        <div class="thinking2">
                            <div class="fluffy-cloud3"><span
                                class="think-woo rainbow">WOO!</span>
                            </div>
                            <img src="media/thinking_anim.gif"/>
                        </div>
                    </div>
                    <div class="box box-2"></div>
                    <div class="box box-play">
                        <div id="other-discard" class="anim-discard-view1">
                            <svg id="fs-tile" class="tile-mm"><use href="media/stiles.svg#B8"/></svg>
                        </div>
                        <fieldset id="playfs" class="midfs"><legend>Play Selection</legend>
                            <button id="fs-draw" class="HoverBtnPass BtnDraw" onclick="PMj.playNt('draw');"
                                title="Draw a new tile"><span><br /></span><svg class="tile-s">
                                    <use href="media/stiles.svg#UT"/></svg></button>
                            <button id="fs-tail" class="HoverBtnPass BtnDraw" onclick="PMj.playNt('tail');"
                                title="Draw a new tile from the flower pile"><span><br /></span><svg class="tile-s">
                                    <use href="media/stiles.svg#tailback"/></svg></button>
                            <button id="fs-pass-multi" class="HoverBtnPass" onclick="PMj.playNt('pass');"><span>
                                Pass<br />&#19981;&#35201;</span></button>
                            <button id="fs-pass-only" class="HoverBtnPass" onclick="PMj.playNt('pass');"><span>
                                Pass<br />&#36807;</span></button>
                            <button id="fs-woo" class="HoverBtnW rainbow" onclick="PMj.playNt('woo');"
                                title="Win"><span>Woo<br /></span><span style="font-size:1.3em;">&#21644;</span></button>
                            <button id="fs-po" class="HoverBtn" onclick="PMj.playNt('po');"
                                title="Play a 3-set with discarded tile"><span>
                                Po <br />&#30896;&#29260;</span></button>
                            <button id="fs-gng0" class="HoverBtn" onclick="PMj.playWt('gngadd')"
                                title="Play a 4-set"><span>
                                Gng<br/>&#25179;</span><svg class="tile-s l-gap">
                                    <use href="media/stiles.svg#M5"/></svg></button>
                            <button id="fs-gng1" class="HoverBtn" onclick="PMj.playWt('gngsecret')"
                                title="Play a 4-set"><span>
                                Gng<br />&#25179;</span><svg class="tile-s l-gap">
                                    <use href="media/stiles.svg#B8"/></svg></button>
                            <button id="fs-gng" class="HoverBtn" onclick="PMj.playNt('gng');"
                                title="Play a 4-set with discarded tile"><span>
                                Gng<br />&#25179;</span></button>
                            <button id="fs-chal" class="HoverBtn" onclick="PMj.playNt('chal');"
                                title="Play a straight of 3 with discarded tile"><span>
                                Cha &#21507;<br /></span><svg class="tile-s">
                                    <use href="media/stiles.svg#M5"/></svg><svg class="tile-s">
                                    <use href="media/stiles.svg#M6"/></svg><svg class="tile-s">
                                    <use href="media/stiles.svg#M7"/></svg></button>
                            <button id="fs-cham" class="HoverBtn" onclick="PMj.playNt('cham');"
                                title="Play a straight of 3 with discarded tile"><span>
                                Cha &#21507;<br /></span><svg class="tile-s">
                                    <use href="media/stiles.svg#M4"/></svg><svg class="tile-s">
                                    <use href="media/stiles.svg#M5"/></svg><svg class="tile-s">
                                    <use href="media/stiles.svg#M6"/></svg></button>
                            <button id="fs-chah" class="HoverBtn" onclick="PMj.playNt('chah');"
                                title="Play a straight of 3 with discarded tile"><span>
                                Cha &#21507;<br /></span><svg class="tile-s">
                                    <use href="media/stiles.svg#M3"/></svg><svg class="tile-s">
                                    <use href="media/stiles.svg#M4"/></svg><svg class="tile-s">
                                    <use href="media/stiles.svg#M5"/></svg></button>
                        </fieldset>
                        <fieldset id="wait4fs" class="midfs hide-me">
                            <div>Waiting for discard...</div>
                            <div class="seat2 w4Bubble">R-Dopey</div>
                        </fieldset>
                    </div>
                </div>
            </div>
            <!-- Right column -->
            <div class="col s4">
                <div class="flex-container">
                    <div class="box box-2">
                        <!-- Chat window -->
                        <div id="chatWindow" class="hide-me">
                            <div class="chatH"><span>Messages</span>
                                <a class="right"
                                onclick="PUI.chatShow(0)"><i
                                class="material-icons">close</i></a>
                            </div>
                            <div id="chatLog"></div>
                            <div class="chatE">
                                <form onsubmit="return PMj.chatsubmit(event)">
                                    <input type="text" id="chattext"
                                    placeholder="type message">
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="box box-svg-m tile-anchor">
                        <table id="rhand" class="table-svg-m"><tr>
                            <td id="tilesp3">flower</td>
                        </tr>
                        <tr><td class="namebar nb-inactive"><span id="seatdir3"
                            class="seatdir"></span><span id="seatname3"
                            class="seatname">Righty</span>
                            <img class="svg-icon" src="media/Dice-2r1-Icon.svg"/>
                        </td></tr>
                        </table>
                        <div class="thinking3">
                            <div class="fluffy-cloud3"><span
                                class="think-po">PO!</span>
                            </div>
                            <img src="media/thinking_anim.gif"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="box box-hand">
            <div class="flex-container">
                <svg id="RefLg" class="tile-lg tile-ref"><use href="media/stiles.svg#OutTgt"/></svg>
                <div class="box box-2">
                    <div id="discard-line">&#8679; &#8679;
                        Drag tile above this line to discard
                        / &#20986;&#29260; &#8679; &#8679;
                    </div>
                    <div class="played-local">
                        <div id="tilesp0"></div>
                    </div>
                </div>
                <div class="box box-svg-lg">
                    <div id="unplayed" class="unplayed-lg tile-anchor">
                        <svg id="OutTgt" class="tile-lg tile-ref"><use href="media/stiles.svg#OutTgt"/></svg>
                        <svg id="DiscardTgt" class="tile-lgp tile-ref"><use href="media/stiles.svg#SymDTgt"/></svg>
                        <svg id="DiagOY" class="tile-lgp tile-ref" viewBox="0 0 86 112" >
                            <defs>
                                <pattern id="OY" width="10" height="10" patternTransform="rotate(45 0 0)" patternUnits="userSpaceOnUse">
                                    <line x1="2.5" y1="0" x2="2.5" y2="10" stroke="orange" stroke-width="5" />
                                    <line x1="7.5" y1="0" x2="7.5" y2="10" stroke="yellow" stroke-width="5" />
                                </pattern>
                            </defs>
                            <rect fill="url(#OY)" stroke-width="0" opacity="50%"
                                x="0.5" y="0.5" rx="6" ry="6" width="84" height="111" />
                        </svg>
                        <svg id="ArrowR" class="tile-lgo tile-ref"><use href="media/stiles.svg#arrowright"/></svg>
                        <svg id="ArrowL" class="tile-lgo tile-ref"><use href="media/stiles.svg#arrowleft"/></svg>
                        <svg class="tile-lg tile-mv"><use href="media/stiles.svg#F2"/></svg>
                    </div>
                    <table id="hand" class="table-svg-lg"><tr><td class="namebar nb-active"><!--
                            --><span id="seatdir0" class="seatdir"></span><span
                            id="seatname0" class="seatname">Human</span><img
                            class="svg-icon" src="media/Dice-2r1-Icon.svg"/><!--
                        --></td></tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal score history -->
    <div id="scoreHistory" class="modal diaTable">
        <h3>Score History</h3>
        <table id='scoreHTable' class='gameTable'>
            <thead><th>Game</th><th>E-W</th><th>N-S</th></thead>
            <tbody id='scoreHbody'></tbody>
        </table>
        <div class="modal-footer">
            <a class="modal-close btn">Close</a>
        </div>
    </div>

    <!--JavaScript at end of body for optimized loading-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script type="text/javascript" src="/js/materialize.min.js"></script>
    <script type="module">
        import * as PSt from './js/pst.js';
        window.PSt = PSt;
        import * as PMj from './js/pmj.js';
        window.PMj = PMj;
        import * as Ws from './js/ws.js';
        window.Ws = Ws;
        import * as PUnpl from './js/punpl.js';
        window.PUnpl = PUnpl;
        import * as PUI from './js/pui.js';
        window.PUI = PUI;
    </script>
    
</body>
